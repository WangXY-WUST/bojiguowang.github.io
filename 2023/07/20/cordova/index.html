<!DOCTYPE html><html lang="zh-CH"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="cordova使用"><meta name="keywords" content="前端,移动端框架,cordova"><meta name="author" content="Yang Wa"><meta name="copyright" content="Yang Wa"><title>cordova使用 | Yang Wa</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.4.2'
} </script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Yang Wa" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">环境安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Android%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">Android环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#java%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.1.</span> <span class="toc-text">java环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Android-Studio%EF%BC%88AS%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">Android Studio（AS）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Gradle%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">Gradle安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node-git%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.</span> <span class="toc-text">Node git安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cordova%E5%AE%89%E8%A3%85"><span class="toc-number">1.4.</span> <span class="toc-text">cordova安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">使用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cordova%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">cordova事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cordova%E6%8F%92%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">cordova插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90vue"><span class="toc-number">5.</span> <span class="toc-text">集成vue</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95"><span class="toc-number">5.1.</span> <span class="toc-text">资源目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E4%B8%A4%E4%B8%AA%E9%A1%B9%E7%9B%AE%E5%8C%85"><span class="toc-number">5.2.</span> <span class="toc-text">分两个项目包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE%E5%8C%85"><span class="toc-number">5.3.</span> <span class="toc-text">一个项目包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E5%91%BD%E4%BB%A4-cordova%E5%91%BD%E4%BB%A4%E9%9B%86%E6%88%90%E5%88%B0vue%E4%B8%AD-%E6%9A%82%E6%97%B6%E6%9C%89%E7%82%B9%E9%97%AE%E9%A2%98%EF%BC%8C%E9%9B%86%E6%88%90%E5%A4%B1%E8%B4%A5"><span class="toc-number">5.4.</span> <span class="toc-text">集成命令(cordova命令集成到vue中)(暂时有点问题，集成失败)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cordova-android%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98"><span class="toc-number">6.1.</span> <span class="toc-text">cordova-android版本问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cordova%E9%9B%86%E6%88%90vue%E8%B7%AF%E7%94%B1%E9%97%AE%E9%A2%98"><span class="toc-number">6.2.</span> <span class="toc-text">cordova集成vue路由问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%83%AD%E6%9B%B4%E6%96%B0"><span class="toc-number">6.3.</span> <span class="toc-text">移动端热更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98%E6%8A%A5%E9%94%99"><span class="toc-number">6.4.</span> <span class="toc-text">版本问题报错</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/blog/avatar.jpeg"></div><div class="author-info__name text-center">Yang Wa</div><div class="author-info__description text-center">Who killed me, and I killed who</div><div class="follow-button"><a href="">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">20</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">36</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">25</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/720.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Yang Wa</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" target="_blank" rel="noopener" href="https://github.com/bojiguowang/">Github</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">cordova使用</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2023-07-20</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/cordova/">cordova</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/cordova/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A1%86%E6%9E%B6/">移动端框架</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2023/07/20/cordova/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2023/07/20/cordova/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">1.7k</span><span class="post-meta__separator">|</span><span>Reading time: 6 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="环境安装"><a href="#环境安装" class="headerlink" title="环境安装"></a>环境安装</h2><h3 id="Android环境"><a href="#Android环境" class="headerlink" title="Android环境"></a>Android环境</h3><h4 id="java环境"><a href="#java环境" class="headerlink" title="java环境"></a>java环境</h4><ol>
<li><p>下载JDK1.8，<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html">下载</a>，我下载其他版本的报错了，报错时提示需要1.8版本，所以建议下载JDK1.8</p>
</li>
<li><p>环境变量配置</p>
<ul>
<li>在系统变量中添加新的环境变量，变量值为JDK安装路径</li>
</ul>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721102659803.png" alt="新增环境变量"></p>
<ul>
<li>Path中新增一项</li>
</ul>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721102823118.png" alt="Path新增项"></p>
</li>
</ol>
<h4 id="Android-Studio（AS）"><a href="#Android-Studio（AS）" class="headerlink" title="Android Studio（AS）"></a>Android Studio（AS）</h4><ol>
<li><p>安装Android Studio，<a target="_blank" rel="noopener" href="https://developer.android.google.cn/studio/">下载地址</a>，安装步骤可以网上找，大差不差的，AS会为你安装最新版的SDK，所以不用单独下载SDK，并且AS的安卓虚拟机在运行cordova时可以用到</p>
</li>
<li><p>设置安卓环境变量</p>
<ul>
<li><p>新增ANDROID_HOME，变量值为AS下载时填写的SDK地址</p>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721104518963.png" alt="新增ANDROID_HOME"></p>
</li>
<li><p>编辑Path变量</p>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721104637280.png" alt="编辑Path变量"></p>
</li>
</ul>
</li>
</ol>
<h3 id="Gradle安装"><a href="#Gradle安装" class="headerlink" title="Gradle安装"></a>Gradle安装</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://gradle.org/releases/">下载地址</a></p>
</li>
<li><p>环境变量配置</p>
<ul>
<li><p>新增环境变量GRADLE_HOME</p>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721105305722.png" alt="新增环境变量"></p>
</li>
<li><p>编辑Path</p>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230721105352316.png" alt="新增Path项"></p>
</li>
</ul>
</li>
</ol>
<h3 id="Node-git安装"><a href="#Node-git安装" class="headerlink" title="Node git安装"></a>Node git安装</h3><ol>
<li>这个更不用说了，直接官网下载即可，建议版本node12.22.12(因为我用的这个成功了，18版本的失败了)</li>
</ol>
<h3 id="cordova安装"><a href="#cordova安装" class="headerlink" title="cordova安装"></a>cordova安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i -g cordova@6.5.0</span><br></pre></td></tr></table></figure>

<h2 id="使用命令"><a href="#使用命令" class="headerlink" title="使用命令"></a>使用命令</h2><ol>
<li>运行于浏览器 <code>cordova run browser</code></li>
<li>运行于android虚拟机 <code>cordova build android</code> <code>cordova emulate android --verbose</code> (verbose为生成详细日志输出)</li>
<li>查看当前cordova android版本 <code>cordova platform version android</code></li>
<li>升级android版本 <code>cordova platform update android</code></li>
<li>卸载当前版本的android <code>cordova platform rm android</code></li>
<li>安装指定版本的android <code>cordova platform add android@6.2.1</code></li>
</ol>
<h2 id="cordova事件"><a href="#cordova事件" class="headerlink" title="cordova事件"></a>cordova事件</h2><ol>
<li>deviceready(设备就绪)</li>
<li>pause（应用挂起，切换到后台）</li>
<li>resume（应用回来，切换到前台）</li>
<li>backbutton（点击回退按钮 ）</li>
<li>menubutton（按下菜单按钮）</li>
</ol>
<p>​    ……</p>
<h2 id="cordova插件"><a href="#cordova插件" class="headerlink" title="cordova插件"></a>cordova插件</h2><ol>
<li>cordova-plugin-statusbar：用于设置状态栏样式</li>
</ol>
<h2 id="集成vue"><a href="#集成vue" class="headerlink" title="集成vue"></a>集成vue</h2><h3 id="资源目录"><a href="#资源目录" class="headerlink" title="资源目录"></a>资源目录</h3><ol>
<li>vue ==&gt; src（资源目录）===&gt; dist（打包目录）</li>
<li>cordova ===&gt; www（资源目录） ===&gt;平台目录（打包目录）</li>
<li>vue集成cordova：src ===&gt; www ===&gt; 平台目录</li>
</ol>
<h3 id="分两个项目包"><a href="#分两个项目包" class="headerlink" title="分两个项目包"></a>分两个项目包</h3><ol>
<li><p>vue的index.html中引入cordova.js</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;cordova.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>修改vue默认打包位置（dist更改为www）</p>
<ul>
<li>文件排列方式如下所示：</li>
</ul>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230720151519106.png" alt="项目目录排列方式"></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//vue.config.js中</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">outputDir</span>: <span class="string">&#x27;../www&#x27;</span>, <span class="comment">//修改打包位置</span></span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p> 在vue的index.html中引入cordova的meta标签</p>
</li>
</ol>
<ul>
<li>将cordova项目-&gt;index.html中的meta标签，删除一下重复的</li>
</ul>
<ol start="4">
<li><p>在vue/src/main.js)添加deviceready事件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;deviceready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>运行命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run build</span><br><span class="line">cordova emulate android --verbose</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="一个项目包"><a href="#一个项目包" class="headerlink" title="一个项目包"></a>一个项目包</h3><ol>
<li><p>vue的index.html中引入cordova.js(同上)</p>
</li>
<li><p>修改vue默认打包名称（dist更改为www）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//构不同于上面,这次直接build在本项目中即可</span></span><br><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">lintOnSave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">outputDir</span>: <span class="string">&#x27;www&#x27;</span>,</span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p> 在vue的index.html中引入cordova的meta标签(同上)</p>
</li>
<li><p>在vue/src/main.js添加deviceready事件(同上)</p>
</li>
<li><p>添加cordova的<code>config.xml</code>到vue项目中</p>
<ul>
<li>复制过去即可</li>
</ul>
</li>
<li><p>构建出www目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></li>
<li><p>添加平台</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cordova platform add android@6.2.1</span><br></pre></td></tr></table></figure></li>
<li><p>运行</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cordova run android</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="集成命令-cordova命令集成到vue中-暂时有点问题，集成失败"><a href="#集成命令-cordova命令集成到vue中-暂时有点问题，集成失败" class="headerlink" title="集成命令(cordova命令集成到vue中)(暂时有点问题，集成失败)"></a>集成命令(cordova命令集成到vue中)(暂时有点问题，集成失败)</h3><ol>
<li><p>在第三步中，虽然只有一个项目bao，但是我们在使用命令的时候，需要npm和cordova之间进行切换，很麻烦，所以可以运用cordova-lib将cordova命令集成到npm中</p>
</li>
<li><p>cordova-lib允许在npm中使用cordova命令 <code>npm i cordova-lib</code></p>
</li>
<li><p>集成(vue.plugins.service)</p>
</li>
</ol>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="cordova-android版本问题"><a href="#cordova-android版本问题" class="headerlink" title="cordova-android版本问题"></a>cordova-android版本问题</h3><ol>
<li><p>在使用过程中，在运行<code>cordova platform add android</code> 后执行<code>cordova run android</code>会报错如下所示，虽然在提示的这个目录下并没有这个templates目录，但是在安装Android Studio过程中并没有什么差错，所以一时间并不知道从哪查起，但是在网上看到了一种解决方法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Could not find gradle wrapper within Android SDK. Might need to update your Android SDK</span><br><span class="line"></span><br><span class="line">Looked here: D:/appDownload/Android/Sdk/tools/templates/gradle/wrapper</span><br></pre></td></tr></table></figure></li>
</ol>
<p>​        <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/42668185/could-not-find-gradle-wrapper-within-android-sdk-might-need-to-update-your-andr">原文链接</a></p>
<blockquote>
<p>Google 通过最新的 sdk 工具更新破坏了 Cordova Android 6.1.x 和其他一些框架。</p>
<p>Cordova Android 6.2.1 已发布，现已兼容最新的 Android SDK。</p>
<p>您可以使用以下命令更新当前不兼容的 Android 平台<code>cordova platform update android@6.2.1</code></p>
<p>或者您可以删除现有平台并添加新平台（将删除您在 Project/platforms/android/ 文件夹中所做的任何手动更改）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cordova platform rm android </span><br><span class="line">cordova platform add android@6.2.1</span><br></pre></td></tr></table></figure>

<p>您必须指定版本，因为当前 CLI 默认安装 6.1.x。</p>
</blockquote>
<p>最后通过安装6.2版本的cordova android解决了问题。</p>
<h3 id="cordova集成vue路由问题"><a href="#cordova集成vue路由问题" class="headerlink" title="cordova集成vue路由问题"></a>cordova集成vue路由问题</h3><ol>
<li>app里没有浏览器，也就没有history对象，所以在使用路由时，需要使用hash路由，不能使用history路由</li>
</ol>
<h3 id="移动端热更新"><a href="#移动端热更新" class="headerlink" title="移动端热更新"></a>移动端热更新</h3><ol>
<li><p>移动端热更新：</p>
<ol>
<li><p>通过vue的热更新实现的，可以先启动vue项目，但是对于移动端的一些配置，vue并不能使用，所以对于cordova的一些配置需要加上环境判断。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//index.html中，之前引入的cordovajs和meta标签都需要加上判断</span><br><span class="line"></span><br><span class="line">&lt;% if(process.env.NODE_ENV === &quot;production&quot;) &#123;%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">	<span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27; data: gap: https://ssl.gstatic.com &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;; media-src *; img-src &#x27;self&#x27; data: content:;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;format-detection&quot;</span> <span class="attr">content</span>=<span class="string">&quot;telephone=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;msapplication-tap-highlight&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width&quot;</span>/&gt;</span></span><br><span class="line">&lt;% &#125; else&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">......</span><br><span class="line">&lt;% if(process.env.NODE_ENV === &quot;production&quot;) &#123;%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;cordova.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js中</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;deviceready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line">    &#125;, <span class="literal">false</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>在config.xml中添加content标签，content标签主要指定app开始指向页面，将content指向vuer本地起的服务IP地址，就可以实现移动端热更新</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//默认情况下</span><br><span class="line"><span class="tag">&lt;<span class="name">content</span> <span class="attr">src</span>=<span class="string">&quot;index.html&quot;</span>/&gt;</span></span><br><span class="line">//新增的</span><br><span class="line"><span class="tag">&lt;<span class="name">content</span> <span class="attr">src</span>=<span class="string">&quot;http://10.130.76.32:8080&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>所以移动端的热更新是通过vue实现的，如果本地没有起服务，那么移动端会报错连接不到。</p>
</li>
<li><p>但是由于cordova是通过vue’实现的，所以在实现热更新的情况下，cordova事件并不会触发，像 <code>menubutton</code> <code>volumeupbutton</code>等等，只要是cordova的事件，都不会触发，如果想进行事件的验证，只需要将config.xml中的<code>&lt;content src=&quot;http://10.130.76.32:8080&quot; /&gt;</code>注销并打包，重启Android模拟器设备即可。</p>
</li>
</ol>
<h3 id="版本问题报错"><a href="#版本问题报错" class="headerlink" title="版本问题报错"></a>版本问题报错</h3><ol>
<li><p>npm run build报错如下，直接执行命令<code>npm i vue@3.2.26</code> 即可</p>
<p><img src="https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/image-20230722132931260.png" alt="报错信息"></p>
</li>
<li><p>在执行<code>npm i -g cordova</code> 或者  <code>cordova add platform android</code> 时报错 ，可能是由于node版本太低，当安装指定版本的cordova和cordova-android时就ok了。</p>
</li>
</ol>
</li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Yang Wa</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2023/07/20/cordova/">http://example.com/2023/07/20/cordova/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%A1%86%E6%9E%B6/">移动端框架</a><a class="post-meta__tags" href="/tags/cordova/">cordova</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2023/07/22/Ionic%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fa fa-chevron-left">  </i><span>Ionic+vue3的使用</span></a></div><div class="next-post pull-right"><a href="/2023/07/18/vue3/"><span>vue3</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://example.com/2023/07/20/cordova/';
  this.page.identifier = '2023/07/20/cordova/';
  this.page.title = 'cordova使用';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'boji' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://boji.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(https://qianrui-xiaoyang.oss-cn-hangzhou.aliyuncs.com/img/channelsoft/720.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2022 - 2023 By Yang Wa</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/lib/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>